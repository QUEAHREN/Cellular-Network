# CellularNetwork
- 代工的课设

# 蜂窝数字移动通信的简单模拟
## 面向对象程序设计大作业
[toc]
## 1. 需求分析
### 1.1 问题描述
- 蜂窝数字移动通信系统的工作原理如下：
    1. 在覆盖区域内分布一定数量的通信基站，基站之间的距离小于等于常量R，每个基站覆盖范围为以R为半径的圆形区域；
    2. 任意基站之间可以直接通信，手机总是和距离最近的基站通信，手机之间不能直接通信；
    3. 手机进入某基站覆盖范围内，向基站注册自身信息（报到），机按一定时间间隔向所在的基站发送心跳信号；
    4. 当一部手机与另外一部手机通信时，首先将拨号指令发送给所在基站，所在基站接收到拨号指令后，询问其他基站，是否有被叫手机。被叫手机所在基站告知主叫手机所在基站手机在此基站范围，主叫手机基站向被叫手机基站发送拨号指令，被叫手机基站将拨号指令发送给被叫手机，被叫手机接听，完成通话。
- 请大家并用Java语言实现一套模拟蜂窝数字移动通信的仿真程序，要求：
    1. 程序开始时，基站位置不变，手机位置随机移动，区域内手机数量不定，手机随机发起通话。
    2. 可以打，可以接；
    3. 可以处理通信过程中手机移动变换基站的情况（选做）；
    4. 通过打印信息表示通信过程，不必处理语音等。
- 程序以命令行的形式运行即可，不需要编写图形界面，也不需要接受命令行输入。程序应充分体现面向对象的思想。

### 1.2 对问题的理解
- 从题目可以得知，我们需要实现一个区域的表示，其中，一些坐标上有固定的基站，部分坐标上分布有手机；
- 每个手机可以随机移动，可以随机拨打电话、挂断电话；这样就产生了拨打电话的很多种情况：对方占线或没在服务区，同理，挂断也要考虑非人为因素挂断，如离开基站；
- 手机随机移动的时候可能也正在通话，也要考虑基站转移、或者进入无服务区挂断的情况；
- 可以把地图可视化的打印出来，更加直观。


## 2. 程序设计
### 2.1 概要设计
- 首先，需要设计一个生成随机数的接口 **Interface RandomN** ，其中，需要有可以实现生成 [L, R] 之间的随机数的方法 **randomNumber()**， 以及随机生成 true/false 的随机选择函数 **randomChoice()**。由于之后很多函数、类的设计中都需要用到随机操作，所以这个接口的设计很有必要。
- 其次，需要设计四个类，分别为：
    - **Class BaseStation** 此类为基站类，一个基站的属性有：
        -  **int stationID** (基站序号)；
        -  **int position_x/position_y** (基站的坐标)；
        -  **int area_R** (基站作用范围)。

        
    - **Class Phone** 此类为手机类，一个手机的属性有 ：
        - **int phoneID** (手机的ID)；
        - **int cphoneID** (如果该手机在通话中，则此为与之通话的手机的ID；否则为-1) ；
        - **Stringnumber** (手机号码)；
        - **int position_x/position_y** (手机的坐标)；
        - **int state** 手机的状态)；
        - **int in_stationID** (如果手机位于某个基站范围内，则为该基站ID；否则为-1)。
 

    - **Class ComMap** 此类为地图类，主要实现可视化地图、手机随机操作等功能，其属性有：
        - **int width/height** (地图的宽高)；
        - **int R** (基站作用范围)；
        - **int phonenum** (手机的个数)；
        - **char[][] map** (可视化地图)；
        - **Arraylist<BaseStation> baseStations** (所有基站)；
        - **Arraylist<Phone> phones** (所有手机)；
    - **Class Main** 此类为主程序。
- 概要的流程大概是：
    1. 初始化各个参数，构造一个 ComMap 对象 comMap，构造函数会打印出当前地图信息(地图标注了基站的位置，基站在地图中的 Symbol 从字符 'a' 开始递增，即 基站1 对应图中字符为 'a'，基站2 对应图中字符为 'b'等；同时标注了手机的位置，同理手机的 Symbol 从字符 '0' 开始递增。需要注意的是，如果手机恰好位于基站的位置，则仅显示手机的 Symbol)；
    2. 调用 comMap.refreshMap() 函数，该函数首先会重新载入地图，填充基站位置信息，再对每部手机随机进行移动，打印出各个手机对应的基站信息(可能无信号)，再向地图填充手机位置信息；
    3. 该函数之后会遍历每个手机，根据每个手机的位置、通话状态随机进行拨号、挂断或者无信号导致通话挂断、跨基站通话等操作，并进行打印输出；
    4. 打印新的地图；
    5. 循环调用 comMap.refreshMap() 函数。

